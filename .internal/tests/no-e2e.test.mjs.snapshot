exports[`no-e2e > should put files 1`] = `
[
  "internal-tests-output-no-e2e/.editorconfig",
  "internal-tests-output-no-e2e/.env",
  "internal-tests-output-no-e2e/.env.sample",
  "internal-tests-output-no-e2e/.env.test",
  "internal-tests-output-no-e2e/.githooks/pre-commit",
  "internal-tests-output-no-e2e/.github/actions/setup-db/action.yml",
  "internal-tests-output-no-e2e/.github/actions/setup-node/action.yml",
  "internal-tests-output-no-e2e/.github/actions/setup-prisma/action.yml",
  "internal-tests-output-no-e2e/.github/workflows/ci.yml",
  "internal-tests-output-no-e2e/.github/workflows/migration.yml",
  "internal-tests-output-no-e2e/.gitignore",
  "internal-tests-output-no-e2e/.node-version",
  "internal-tests-output-no-e2e/.npmrc",
  "internal-tests-output-no-e2e/.vscode/extensions.json",
  "internal-tests-output-no-e2e/.vscode/settings.json",
  "internal-tests-output-no-e2e/Dockerfile",
  "internal-tests-output-no-e2e/README.md",
  "internal-tests-output-no-e2e/biome.json",
  "internal-tests-output-no-e2e/compose.yml",
  "internal-tests-output-no-e2e/lint-staged.config.mjs",
  "internal-tests-output-no-e2e/next.config.ts",
  "internal-tests-output-no-e2e/otel-collector-config.yml",
  "internal-tests-output-no-e2e/package.json",
  "internal-tests-output-no-e2e/pnpm-lock.yaml",
  "internal-tests-output-no-e2e/postcss.config.mjs",
  "internal-tests-output-no-e2e/prisma/ERD.md",
  "internal-tests-output-no-e2e/prisma/migrations/migration_lock.toml",
  "internal-tests-output-no-e2e/prisma/schema.prisma",
  "internal-tests-output-no-e2e/public/.gitkeep",
  "internal-tests-output-no-e2e/renovate.json",
  "internal-tests-output-no-e2e/tests/test-db.setup.ts",
  "internal-tests-output-no-e2e/tests/vitest.setup.ts",
  "internal-tests-output-no-e2e/tsconfig.json",
  "internal-tests-output-no-e2e/vitest.config.ts",
  "mocked/migration.sql"
]
`;

exports[`no-e2e > should update .github/workflows/ci.yml 1`] = `
[
  "name: ci",
  "",
  "on:",
  "  pull_request:",
  "    branches:",
  "      - main",
  "    paths:",
  "      - package.json",
  "      - src/**",
  "      - e2e/**",
  "      - .github/workflows/ci.yml",
  "      - Dockerfile",
  "  push:",
  "    branches:",
  "      - main",
  "    paths:",
  "      - package.json",
  "      - src/**",
  "      - e2e/**",
  "      - .github/workflows/ci.yml",
  "      - Dockerfile",
  "",
  "jobs:",
  "  lint:",
  "    runs-on: ubuntu-latest",
  "    steps:",
  "      - uses: actions/checkout@v4",
  "      - uses: ./.github/actions/setup-node",
  "      - run: pnpm lint",
  "      - run: npx biome check . && npx prettier --check './**/*.{md,yml}'",
  "  build:",
  "    runs-on: ubuntu-latest",
  "    steps:",
  "      - uses: actions/checkout@v4",
  "      - uses: ./.github/actions/setup-node",
  "      - uses: ./.github/actions/setup-db",
  "      - run: pnpm build",
  "  build-docker:",
  "    runs-on: ubuntu-latest",
  "    env:",
  "      # should store them to github.secrets",
  "      POSTGRES_URL: postgresql://dev:1234@172.17.0.1:5432/dev?schema=public",
  "      NEXTAUTH_SECRET: UfxvOS6HetHOFkL44YTITYgc0DOuOlz5TBp3jkbnZ3w=",
  "      NEXT_PUBLIC_SITE_URL: http://localhost:3000",
  "    steps:",
  "      - uses: actions/checkout@v4",
  "      - uses: ./.github/actions/setup-node",
  "      - uses: ./.github/actions/setup-db",
  "      - run: |",
  "          docker build \\\\",
  "            -t app \\\\",
  "            -f Dockerfile \\\\",
  "            --build-arg POSTGRES_URL=\${{env.POSTGRES_URL}} \\\\",
  "            --build-arg NEXTAUTH_SECRET=\${{env.NEXTAUTH_SECRET}} \\\\",
  "            --build-arg NEXT_PUBLIC_SITE_URL=\${{env.NEXT_PUBLIC_SITE_URL}} \\\\",
  "            .",
  "      - run: docker run -d -p 3000:3000 app",
  "      - run: |",
  "          until $(curl --output /dev/null --silent --fail \${{env.NEXT_PUBLIC_SITE_URL}}); do",
  "            printf '!'",
  "            sleep 1",
  "          done",
  "        timeout-minutes: 1",
  "  unit-test:",
  "    runs-on: ubuntu-latest",
  "    steps:",
  "      - uses: actions/checkout@v4",
  "      - uses: ./.github/actions/setup-node",
  "      - uses: ./.github/actions/setup-prisma",
  "      - run: pnpm test",
  ""
]
`;

exports[`no-e2e > should update .gitignore 1`] = `
[
  "node_modules",
  "coverage",
  "",
  "/.next/",
  "",
  "",
  ".DS_Store",
  "*.pem",
  "",
  ".env",
  "",
  ".vercel",
  "",
  "*.tsbuildinfo",
  "next-env.d.ts",
  "",
  ""
]
`;

exports[`no-e2e > should update README.md 1`] = `
[
  "## Setup",
  "",
  "\`\`\`sh",
  "# enable git hooks and corepack",
  "$ npm run setup",
  "# install deps",
  "$ pnpm i",
  "# create \\".env\\" and modifying environment variables",
  "$ cp .env.sample .env",
  "\`\`\`",
  "",
  "## Development",
  "",
  "\`\`\`sh",
  "# start docker compose, migrations(generating the client), and next dev",
  "$ pnpm dev",
  "\`\`\`",
  "",
  "## Database",
  "",
  "\`\`\`sh",
  "# create new migration",
  "$ pnpm db:migrate",
  "# reset the DB",
  "$ pnpm db:reset",
  "# view the database items",
  "$ pnpm db:studio",
  "\`\`\`",
  "",
  "## Test",
  "",
  "Test uses real DB via testcontaiers.",
  "",
  "### Unit Test",
  "",
  "\`\`\`sh",
  "# execute",
  "$ pnpm test",
  "# watch the unit test",
  "$ pnpm test:watch",
  "\`\`\`",
  "",
  "## Production",
  "",
  "\`\`\`sh",
  "$ pnpm db:up",
  "$ pnpm build",
  "$ pnpm start",
  "\`\`\`",
  "",
  "If you set \`POSTGRESQL_URL\` as GitHub secrets, you will be able to execute migration for database on GitHub actions(\`.github/workflows/migration.yml\`).",
  "",
  "## Observability",
  "",
  "This project has [OpenTelemetry](https://opentelemetry.io/) and it works only production environment.",
  "",
  "### Local",
  "",
  "\`\`\`sh",
  "$ pnpm db:up",
  "$ pnpm build",
  "$ pnpm start",
  "# open Jaeger",
  "$ open http://localhost:16686/",
  "\`\`\`",
  "",
  "### Server",
  "",
  "Please add a exporter url to \`.env\`.",
  "",
  "\`\`\`",
  "TRACE_EXPORTER_URL=",
  "\`\`\`",
  "",
  "## Links",
  "",
  "- [Database ER diagram](/prisma/ERD.md)",
  ""
]
`;

exports[`no-e2e > should update dependencies 1`] = `
{
  "dependencies": [
    "@auth/prisma-adapter",
    "@hookform/resolvers",
    "@opentelemetry/exporter-metrics-otlp-grpc",
    "@opentelemetry/exporter-trace-otlp-grpc",
    "@opentelemetry/exporter-trace-otlp-proto",
    "@opentelemetry/instrumentation-http",
    "@opentelemetry/resources",
    "@opentelemetry/sdk-metrics",
    "@opentelemetry/sdk-node",
    "@opentelemetry/sdk-trace-base",
    "@opentelemetry/semantic-conventions",
    "@prisma/client",
    "@prisma/instrumentation",
    "clsx",
    "next",
    "next-auth",
    "react",
    "react-dom",
    "react-hook-form",
    "zod"
  ],
  "devDependencies": [
    "@biomejs/biome",
    "@tailwindcss/postcss",
    "@testing-library/react",
    "@types/node",
    "@types/react",
    "@types/react-dom",
    "@vitejs/plugin-react",
    "dotenv",
    "dotenv-cli",
    "lint-staged",
    "postcss",
    "prettier",
    "prisma",
    "prisma-erd-generator",
    "tailwindcss",
    "testcontainers",
    "typescript",
    "vitest"
  ]
}
`;

exports[`no-e2e > should update npm scripts 1`] = `
[
  "setup",
  "dev",
  "start",
  "build",
  "test",
  "test:watch",
  "db:up",
  "db:migrate",
  "db:reset",
  "db:deploy",
  "db:studio",
  "generate:client",
  "lint",
  "fmt"
]
`;
